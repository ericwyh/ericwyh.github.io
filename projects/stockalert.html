<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eric Y. Wang</title>
  <link rel="shortcut icon" href="myicon.ico" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="../main.css">
  <style type="text/css">
    .search-bar-width {
     width: 200px; 
    }
    /*.pad-right{
      padding-right: 2%;
    }
    */
    .panel-primary {
      width: 100%;
    }
    .vert-center {
      position: absolute;
      top: 35%;
      left: 50%;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
    }
  </style>
</head>
<body>
  <div class="vert-center">
    <div class="input-group search-bar-width">
      <input type="text" placeholder="Symbol" class="form-control" id="symbol">
      <span class="input-group-btn">
        <button class="btn btn-primary" type="button">
          <span class="glyphicon glyphicon-search"></span>
        </button>
      </span>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading"><h3 class="panel-title"><b>Results:</b></h3></div>
      <div class="panel-body">
        <div class="container-fluid"></div>
        <button class="btn btn-sm pull-right">New Search</button>
      </div>
    </div>
  </div>
  
    <!--<span class="glyphicon glyphicon-time"></span>-->
  <script type="text/javascript">
    $('.panel').hide();
    function getQuote() {
      var script = document.createElement('script');
      var query = 'select * from yahoo.finance.quote where symbol in ("'+document.getElementById("symbol").value+'")';
      script.setAttribute('src', 'https://query.yahooapis.com/v1/public/yql?q='+query+'&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=printQuote');
      document.body.appendChild(script);
    }
    
    function printQuote(data) {
      var results;
      $('.panel').show();
      $('.input-group').hide();
      var quote = data.query.results.quote;
      results = '<div class="row"><div class="col-md-5"><b>Name</b></div><div class="col-md-3">' + quote.Name + '</div></div>' +
                '<div class="row"><div class="col-md-5"><b>Symbol</b></div><div class="col-md-3">' + quote.Symbol +'</div></div>' +
                '<div class="row"><div class="col-md-5"><b>Last Trade Price</b></div><div class="col-md-3">' + quote.LastTradePriceOnly + '</div></div>' +
                '<div class="row"><div class="col-md-5"><b>Stock Exchange</b></div><div class="col-md-3">' + quote.StockExchange + '</div></div>' + 
                '<div class="row"><div class="col-md-5"><b>Day\'s Range</b></div><div class="col-md-3">' + quote.DaysRange + '</div></div>';
      $('.container-fluid').html(results);
    }
    $('.btn-primary').click(function() {
      getQuote();
    });
    $('.btn-sm').click(function() {
        $('.panel').hide();
        $('.input-group').show();
        $('#symbol').val('');
    });
    
    $("#symbol").keyup(function(event){
        if(event.keyCode == 13){
            getQuote();
        }
    });
    
    function isMobile() {
      if(window.innerWidth <= 800 && window.innerHeight <= 600) {
        return true;
      } else {
        return false;
      }
    }
    
    $( document ).ready(function() {
      if(isMobile()) {
        $('body').css('width','100%');
      }
    });
  </script>
</body>
</html>
